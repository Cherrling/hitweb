<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- <meta name="viewport" content="width=768px"> -->
    <!-- <script src="md5.js"></script> -->
    <!-- <script src="module.js"></script> -->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- <script src="index.js"></script> -->
    <link rel="stylesheet" href="index.css" />
    <title>I Am Alive-Hi!</title>
    <style>
      body{
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div
      id="write"
      contenteditable="true"
      style="height: 200px; width: 400px; border: solid;display: inline-block;"
    ></div>
    <ul></ul>
    <!-- <input id="write" contenteditable="true" style="height: 200px; width: 400px; border: solid;"> -->

    <button id="send" class="button">Submit</button>
    <br />

    <br />
  </body>

  <script>
    $(document).ready(function () {
      $('#send').click(function (e) {
        var text = $('#write').text()
        console.log(text)
        e.preventDefault()
        $.ajax({
          type: 'post',
          url: '//127.0.0.1:3000/weibo',
          data: {
            content: text
          },
          dataType: 'text',
          success: function (response) {
            $('#write').text('');
            console.log(response)
            var li = $('<li></li>')
            li.html(response + "<a href='javascript:;'> 删除</a>")
            $('ul').prepend(li)
            li.slideDown()
            $('#write').val('')
          }
        })
      })
      $('ul').on('click', 'a', function () {
        $(this)
          .parent()
          .slideUp(function () {
            $(this).remove()
          })
      })
    })
  </script>
</html>
